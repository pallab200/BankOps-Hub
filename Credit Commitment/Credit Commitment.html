<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Credit Commitment Editor</title>
  <link rel="stylesheet" href="../css/fontawesome.min.css">
  <link rel="stylesheet" href="../css/fontawesome-fix.css">
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>body { font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif; }</style>
</head>
<body>
  <!-- Left Slide Menu Toggle -->
  <button class="slide-menu-toggle" id="slideMenuToggle" title="Open Menu"><i class="fas fa-bars"></i></button>
  <div class="slide-menu-backdrop" id="slideMenuBackdrop"></div>
  <div class="slide-menu" id="slideMenu">
    <div class="slide-menu-header">
      <h3><i class="fas fa-list"></i> Quick Navigation</h3>
      <button class="slide-menu-close" id="slideMenuClose"><i class="fas fa-times"></i></button>
    </div>
    <div class="slide-menu-body">
      <ul class="slide-menu-nav">
        <li><a href="#" id="slideMenuExportCommit"><i class="fas fa-file-export"></i> Export Commitments</a></li>
        <li><a href="#" id="slideMenuImportCommit"><i class="fas fa-file-import"></i> Import Commitments</a></li>
        <li><a href="#" id="slideMenuExportCust"><i class="fas fa-users"></i> Export Customers</a></li>
        <li><a href="#" id="slideMenuImportCust"><i class="fas fa-users"></i> Import Customers</a></li>
        <li><a href="#" id="slideMenuEditBranch"><i class="fas fa-building"></i> Edit Branch Details</a></li>
        <li><a href="#" id="slideMenuEditOfficer"><i class="fas fa-user-tie"></i> Edit Officer Details</a></li>
      </ul>
      <div style="padding:8px 0;border-top:1px solid var(--border);margin-top:8px;text-align:center;font-size:0.85rem;color:var(--text-muted);font-weight:600;">
        Developed by Tanzil Ahmed — EID 7966.
      </div>
    </div>
  </div>

  <header>
    <div style="display:flex;align-items:center;justify-content:space-between;">
      <h1><i class="fas fa-file-contract"></i>Credit Commitment Editor</h1>
    </div>
    <div class="nav-buttons" style="margin-top:14px;">
      <button id="navEditor" class="nav-btn active"><i class="fas fa-edit"></i> Editor</button>
      <button id="navCustomers" class="nav-btn"><i class="fas fa-users"></i> Customers</button>
      <div class="header-actions"></div>
    </div>
    <input id="importCommitFile" type="file" accept="application/json" style="display:none" />
    <input id="importCustFile" type="file" accept="application/json" style="display:none" />
    <button id="exportCommitBtn" type="button" style="display:none;"></button>
    <button id="importCommitBtn" type="button" style="display:none;"></button>
    <button id="exportCustBtn" type="button" style="display:none;"></button>
    <button id="importCustBtn" type="button" style="display:none;"></button>
    <button id="branchEditBtn" type="button" style="display:none;"></button>
    <button id="signEditBtn" type="button" style="display:none;"></button>
  </header>

  <main>
    <!-- ========== EDITOR PAGE ========== -->
    <section id="editorPage" class="unified-editor">
      <div class="editor-column">
        <h2><i class="fas fa-sliders-h"></i> Configuration</h2>

        <div class="form-group">
          <label for="templateSelect"><i class="fas fa-file-alt"></i> Form Type</label>
          <select id="templateSelect"></select>
        </div>

        <div class="form-group">
          <label for="orgSelect"><i class="fas fa-building"></i> Organization</label>
          <select id="orgSelect"><option value="-1">— Select organization —</option></select>
        </div>

        <div class="form-group">
          <label for="customerName"><i class="fas fa-user"></i> Customer Name</label>
          <input id="customerName" type="text" placeholder="Enter customer name" />
        </div>

        <div class="form-group">
          <label for="refStart"><i class="fas fa-hashtag"></i> Reference No</label>
          <input id="refStart" type="number" placeholder="e.g. 427" />
        </div>

        <input id="address" type="hidden" />
        <input id="proprietorName" type="hidden" />

        <div class="form-group">
          <label for="recipient"><i class="fas fa-envelope"></i> Recipient Address</label>
          <textarea id="recipient" rows="3" placeholder="The Executive Engineer,&#10;LGED, Pabna"></textarea>
        </div>

        <input id="branchDetails" type="hidden" />
        <input id="leftSignName" type="hidden" />
        <input id="leftSignTitle" type="hidden" />
        <input id="leftSignSig" type="hidden" />
        <input id="rightSignName" type="hidden" />
        <input id="rightSignTitle" type="hidden" />
        <input id="rightSignSig" type="hidden" />

        <div class="buttons" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
          <button id="printBtn" class="iss-btn"><i class="fas fa-file-pdf"></i> Print / PDF</button>
          <button id="sendMailBtn" class="iss-btn"><i class="fas fa-paper-plane"></i> Send Mail</button>
        </div>
      </div>

      <div class="editor-column">
        <h3><i class="fas fa-list-check"></i> Commitment List</h3>

        <div id="editorListForm">
          <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:flex-end;">
            <div style="flex:0 0 120px;min-width:100px;">
              <label>Tender ID</label>
              <input id="el_tenderId" type="text" placeholder="Tender ID" />
            </div>
            <div style="flex:2 1 300px;min-width:200px;">
              <label>Tender Package No</label>
              <input id="el_packageNo" type="text" placeholder="Tender Package No" />
            </div>
            <div style="flex:0 0 130px;min-width:110px;">
              <label>Amount (Lac)</label>
              <input id="el_amount" type="text" placeholder="e.g. 2.00" style="text-align:right;" />
            </div>
            <div style="flex:1 1 200px;min-width:160px;">
              <label>IFT No</label>
              <input id="el_ift" type="text" placeholder="Invitation for Tender No" />
            </div>
          </div>
          <div style="margin-top:12px;">
            <label>Package Description</label>
            <input id="el_description" type="text" placeholder="Package Description" />
          </div>
          <div class="buttons" style="margin-top:14px;">
            <button id="editorAddSaveBtn" class="iss-btn small"><i class="fas fa-save"></i> Save</button>
            <button id="editorAddCancelBtn" class="iss-btn small secondary"><i class="fas fa-times"></i> Cancel</button>
          </div>
        </div>

        <div class="table-wrapper" style="max-height:440px;">
          <table id="editorListTable">
            <thead>
              <tr>
                <th>S.L</th>
                <th>Tender ID</th>
                <th>Package No</th>
                <th>Amount</th>
                <th>IFT No</th>
                <th>Description</th>
                <th style="text-align:center;">Actions</th>
              </tr>
            </thead>
            <tbody id="editorListBody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <div id="previewArea" style="display:none"></div>

    <!-- ========== CUSTOMERS PAGE ========== -->
    <section id="customerPage" style="display:none;width:100%;">
      <div class="unified-customers">
        <div class="customer-column">
          <h2><i class="fas fa-user-plus"></i> Add Customer</h2>

          <div class="form-group">
            <label for="cust_org"><i class="fas fa-building"></i> Organization</label>
            <input id="cust_org" type="text" placeholder="Organization name" />
          </div>

          <div class="form-group">
            <label for="cust_prop"><i class="fas fa-user"></i> Proprietor</label>
            <input id="cust_prop" type="text" placeholder="Proprietor name" />
          </div>

          <div class="form-group">
            <label for="cust_addr"><i class="fas fa-map-marker-alt"></i> Address</label>
            <input id="cust_addr" type="text" placeholder="Address" />
          </div>

          <div class="form-group">
            <label for="cust_email"><i class="fas fa-envelope"></i> Email</label>
            <input id="cust_email" type="email" placeholder="Email" />
          </div>

          <div class="buttons" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
            <button id="custAddBtn" class="iss-btn"><i class="fas fa-save"></i> Add / Save</button>
            <button id="custClearBtn" class="iss-btn secondary"><i class="fas fa-times"></i> Clear</button>
          </div>
        </div>

        <div class="customer-column">
          <h3><i class="fas fa-list"></i> Saved Customers</h3>
          <div class="table-wrapper" style="max-height:520px;">
            <table id="customerTable">
              <thead>
                <tr>
                  <th>Organization</th>
                  <th>Proprietor</th>
                  <th>Address</th>
                  <th>Email</th>
                  <th style="text-align:center;">Actions</th>
                </tr>
              </thead>
              <tbody id="customerTableBody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="neon-footer">
    <div class="footer-rgb">
      <span class="rgb-text">Developed by Tanzil Ahmed — EID 7966.</span>
    </div>
  </footer>

  <!-- Branch Details Modal -->
  <div id="branchModal" class="modal-overlay hidden" onclick="closeBranchModalOnBackdrop(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
      <div class="modal-header">
        <i class="fas fa-building"></i>
        <h3>Branch Details</h3>
        <button type="button" class="modal-close" id="branchModalClose">&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-section">
          <div class="modal-form-group">
            <label><i class="fas fa-building"></i> Branch Name</label>
            <input id="modal_branch_name" type="text" placeholder="Enter branch name" />
          </div>
          <div class="modal-form-group">
            <label><i class="fas fa-map-marker-alt"></i> Address</label>
            <textarea id="modal_branch_address" rows="3" placeholder="Enter branch address"></textarea>
          </div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;">
            <div class="modal-form-group">
              <label><i class="fas fa-phone"></i> Contact</label>
              <input id="modal_branch_contact" type="text" placeholder="Phone number" />
            </div>
            <div class="modal-form-group">
              <label><i class="fas fa-globe"></i> Website</label>
              <input id="modal_branch_website" type="text" placeholder="Website URL" />
            </div>
          </div>
        </div>
      </div>
      <div class="modal-actions">
        <button type="button" class="iss-btn btn-cancel" id="branchModalCancel"><i class="fas fa-times"></i> Cancel</button>
        <button id="modal_branch_save" type="button" class="iss-btn"><i class="fas fa-save"></i> Save</button>
      </div>
    </div>
  </div>

  <!-- Officer Details Modal -->
  <div id="signModal" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="modal-header">
        <i class="fas fa-pen-fancy"></i>
        <h3>Officer Details</h3>
        <button type="button" class="modal-close" id="signModalClose">&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-section two-column">
          <div>
            <h4>Left Officer</h4>
            <div class="modal-form-group">
              <label><i class="fas fa-user"></i> Name</label>
              <input id="modal_left_name" type="text" placeholder="Officer name" />
            </div>
            <div class="modal-form-group">
              <label><i class="fas fa-briefcase"></i> Designation</label>
              <input id="modal_left_title" type="text" placeholder="Job title" />
            </div>
            <div class="modal-form-group">
              <label><i class="fas fa-image"></i> Signature</label>
              <input id="modal_left_sigfile" type="file" accept="image/*" />
            </div>
            <div id="modal_left_sig_preview" class="modal-preview"></div>
            <button id="modal_left_sig_remove" type="button" class="iss-btn btn-cancel" style="width:100%;margin-top:8px;"><i class="fas fa-trash"></i> Remove</button>
          </div>
          <div>
            <h4>Right Officer</h4>
            <div class="modal-form-group">
              <label><i class="fas fa-user"></i> Name</label>
              <input id="modal_right_name" type="text" placeholder="Officer name" />
            </div>
            <div class="modal-form-group">
              <label><i class="fas fa-briefcase"></i> Designation</label>
              <input id="modal_right_title" type="text" placeholder="Job title" />
            </div>
            <div class="modal-form-group">
              <label><i class="fas fa-image"></i> Signature</label>
              <input id="modal_right_sigfile" type="file" accept="image/*" />
            </div>
            <div id="modal_right_sig_preview" class="modal-preview"></div>
            <button id="modal_right_sig_remove" type="button" class="iss-btn btn-cancel" style="width:100%;margin-top:8px;"><i class="fas fa-trash"></i> Remove</button>
          </div>
        </div>

        <div class="modal-section">
          <h4>Header Logo</h4>
          <div style="display:grid;grid-template-columns:1fr auto;gap:16px;align-items:start;">
            <div class="modal-form-group">
              <label><i class="fas fa-image"></i> Logo (Top-Left)</label>
              <input id="headerLogoFile" type="file" accept="image/*" style="display:none" />
              <div style="display:flex;gap:8px;">
                <button id="headerLogoAdd" type="button" class="iss-btn" style="flex:1;"><i class="fas fa-plus"></i> Add Logo</button>
                <button id="headerLogoRemove" type="button" class="iss-btn btn-cancel"><i class="fas fa-trash"></i> Remove</button>
              </div>
              <input id="headerLogoData" type="hidden" />
            </div>
            <div style="background:var(--bg-elevated);padding:16px;border-radius:8px;width:120px;height:100px;display:flex;align-items:center;justify-content:center;border:2px dashed var(--border);">
              <div id="headerLogoPreview" style="max-width:100%;max-height:100%;text-align:center;color:var(--text-muted);font-size:0.85rem;">Logo</div>
            </div>
          </div>
        </div>

        <div class="modal-section">
          <h4>Footer Text</h4>
          <div class="modal-form-group">
            <label><i class="fas fa-file-alt"></i> Footer Content</label>
            <textarea id="footerText" rows="3" placeholder="Enter footer text (e.g. bank contact details)"></textarea>
          </div>
        </div>
      </div>
      <div class="modal-actions">
        <button type="button" class="iss-btn btn-cancel" id="signModalCancel"><i class="fas fa-times"></i> Cancel</button>
        <button id="modal_sign_save" type="button" class="iss-btn"><i class="fas fa-save"></i> Save</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
  <script>
    // Slide Menu Toggle
    const slideMenuToggle = document.getElementById('slideMenuToggle');
    const slideMenu = document.getElementById('slideMenu');
    const slideMenuBackdrop = document.getElementById('slideMenuBackdrop');
    const slideMenuClose = document.getElementById('slideMenuClose');

    function openSlideMenu() { slideMenu.classList.add('open'); slideMenuBackdrop.classList.add('show'); }
    function closeSlideMenu() { slideMenu.classList.remove('open'); slideMenuBackdrop.classList.remove('show'); }

    if (slideMenuToggle) slideMenuToggle.addEventListener('click', openSlideMenu);
    if (slideMenuClose) slideMenuClose.addEventListener('click', closeSlideMenu);
    if (slideMenuBackdrop) slideMenuBackdrop.addEventListener('click', closeSlideMenu);

    // Menu item handlers
    ['ExportCommit','ImportCommit','ExportCust','ImportCust','EditBranch','EditOfficer'].forEach(function(key) {
      var menuItem = document.getElementById('slideMenu' + key);
      var btnMap = {
        ExportCommit: 'exportCommitBtn', ImportCommit: 'importCommitBtn',
        ExportCust: 'exportCustBtn', ImportCust: 'importCustBtn',
        EditBranch: 'branchEditBtn', EditOfficer: 'signEditBtn'
      };
      if (menuItem) {
        menuItem.addEventListener('click', function(e) {
          e.preventDefault();
          closeSlideMenu();
          var btn = document.getElementById(btnMap[key]);
          if (btn) btn.click();
        });
      }
    });
  </script>
</body>
</html>
